(window.webpackJsonpdpx=window.webpackJsonpdpx||[]).push([[0],{31:function(e,t,n){e.exports=n(63)},36:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),s=n.n(o),i=(n(36),n(2)),c=n(3),l=n(5),u=n(4),p=n(11),h=n(6),v=n(9),d={beginDrag:function(e){return console.log("begin drag",this,e),{eventData:e.eventData}}},m=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).sty={background:"red"},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props;e.isDragging;return(0,e.connectDragSource)(r.a.createElement("div",{className:"Event",style:this.sty},this.props.eventData.text))}}]),t}(r.a.Component),f=Object(v.c)("toy",d,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(m),b=n(41),g={},y="kE3KkG0cvvetoGPLicbW7",O="https://www.samserrels.com/jsonStore/data.php",j=function(){};function k(){return g.events}function E(){g.events.push({text:"New Event",catagory:"",allocated:!1,startTime:0,startDay:0,duration:1}),w()}var D="";function w(){""==D?b.get(O,{params:{uid:y}}).then((function(e){(g=JSON.parse(e.data.data)).events||(g.events=[]),D=e.data.data,console.info("Got Data from server",g),j()})).catch((function(e){if(e.response&&404==e.response.status){console.info("Creating new user on Server");S({name:"Sam",events:[]}).then((function(){console.info("new user Created"),w()}),(function(e){console.log(3,e)}))}else console.error(2,JSON.stringify(e),e)})):JSON.stringify(g)!==D&&(console.info("Updating Server",g),S(g).then((function(){console.info("Server Updated")}),(function(e){console.log(5,e)})),j())}function S(e){var t={method:"PUT",headers:{"content-type":"application/x-www-form-urlencoded"},data:n(59).stringify({uid:y,data:JSON.stringify(e)}),url:O};return b(t)}var T=["Monday","Tuesday","Wednesday","Thursday","Friday"],C=function(e,t){var n=new Date(0);n.setHours(9);var a=new Date(n);return a.setHours(17),new Date(n.getTime()+t*(a-n)/e)},N=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getEventAtThisTime",value:function(e,t){return this.props.events.find((function(n,a){return n.allocated&&n.startDay===e&&n.startTime===t}))}},{key:"getEventsOverlappingThisTime",value:function(e,t){return this.props.events.find((function(n,a){return n.startDay===e&&n.startTime<=t&&n.startTime+n.duration>=t}))}},{key:"render",value:function(){var e=this.props,t=e.isOver,n=e.canDrop,a=e.connectDropTarget,o={height:this.props.hgt+"%",minHeight:this.props.hgt+"%"},s=this.props.st.toISOString().slice(11,16),i=this.RenderEvent(this.props.di,this.props.ti);return i||(i=r.a.createElement("div",{className:"TimeSlotLabel"},this.props.di," - ",this.props.ti," - ",s)),a(r.a.createElement("div",{className:"TimeSlot",style:o,key:this.props.ti},t&&n&&"G",!t&&n&&"R",t&&!n&&"B",i))}},{key:"RenderEvent",value:function(e,t){var n=this.getEventAtThisTime(e,t);return n?r.a.createElement(f,{eventData:n}):null}}]),t}(r.a.Component);var G={drop:function(e,t,n){if(!t.didDrop()){var a=t.getItem();return console.log("Hello drop",this,a,e),a.eventData.startDay=e.di,a.eventData.startTime=e.ti,a.eventData.allocated=!0,w(),{moved:!0}}}},B=Object(v.d)("toy",G,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}}))(N),x=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).genTimeslots=function(e,t){for(var a=[],o=Math.floor(100/t),s=0;s<t;s++)a.push(r.a.createElement(B,{events:n.props.events,di:e,ti:s,hgt:o,key:s,st:C(t,s)}));return a},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"DayChart"},r.a.createElement("div",{className:"DayHeadder"},T[this.props.dayindex]),r.a.createElement("div",{className:"DayTimeSlots"},this.genTimeslots(this.props.dayindex,this.props.timeslices)))}}]),t}(r.a.Component),H=n(13),R=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){console.log("WB Render",this.props);for(var e=[],t=0;t<this.props.days;t++)e.push(r.a.createElement(x,{events:this.props.events,dayindex:t,key:t,timeslices:this.props.timeslices}));var n=this.props.small?"68%":"98%";return r.a.createElement(v.b,{backend:H.a},r.a.createElement("div",{className:"WeekBoard",style:{width:n}},e))}}]),t}(r.a.Component),A=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={value:"coconut"},n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),e.options?n.optionElements=e.options.map((function(e,t){return r.a.createElement("option",{value:e[0],key:t},e[1])})):(e.options=[],n.optionElements=[r.a.createElement("option",null,"DropDown with no Options!")]),e.changeCallback?n.changeCallback=e.changeCallback:n.changeCallback=function(){},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),this.changeCallback({value:e.target.value})}},{key:"handleSubmit",value:function(e){alert("Your favorite flavor is: "+this.state.value),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,this.props.label,r.a.createElement("select",{value:this.state.value,onChange:this.handleChange},this.optionElements)))}}]),t}(r.a.Component),I=function(e){function t(e){var n;return Object(i.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e)),console.info(e),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"OptionsBar"},r.a.createElement("div",null," ",r.a.createElement(A,{options:[[8,"Hourly"],[16,"Half-hourly"],[24,"15 Mins"]],changeCallback:function(t){return e.props.setGlobalState("timeslices",t.value)},label:"Time Division"})),r.a.createElement("div",null," ",r.a.createElement("input",{type:"checkbox",name:"ShowBacklog",onChange:function(t){return e.props.setGlobalState("showbacklog",t.target.checked)}}),"Show Backlog"))}}]),t}(r.a.Component),J=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"RenderEvent",value:function(){if(console.info("RenderEvent",this.props),this.props.events){var e=this.props.events.filter((function(e){return!e.allocated}));return console.info("RenderEvent2",e),e.map((function(e){return r.a.createElement(f,{eventData:e})}))}}},{key:"render",value:function(){var e=this.props,t=(e.isOver,e.canDrop,e.connectDropTarget);return console.info("BacklogList render",this.props),t(r.a.createElement("div",{className:"backlogList"},this.RenderEvent()))}}]),t}(r.a.Component);function W(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}}var L=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={drop:function(e,t,n){if(!t.didDrop()){var a=t.getItem();return console.log("Hello drop",this,a,e),a.eventData.allocated=!1,w(),{moved:!0}}}},t=Object(v.d)("toy",e,W)(J);return console.info("BackLog render",this.props),r.a.createElement("div",{className:"backlog"},r.a.createElement("div",{className:"backlogHeadder"},r.a.createElement("button",{type:"button",onClick:E},"New")," Backlog"),r.a.createElement(v.b,{backend:H.a},r.a.createElement(t,{events:this.props.events})))}}]),t}(r.a.Component),M=(n(62),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={timeslices:8,days:5},n.setGlobalState=n.setGlobalState.bind(Object(p.a)(n)),n.state.events=[],j=function(){console.log(k(),n.state),n.setGlobalState("events",k())},w(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"setGlobalState",value:function(e,t){var n={};n[e]=t,this.setState(n)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"}),this.state.showbacklog&&r.a.createElement(L,{events:this.state.events}),r.a.createElement(R,{timeslices:this.state.timeslices,days:this.state.days,small:this.state.showbacklog,events:this.state.events}),r.a.createElement(I,{setGlobalState:this.setGlobalState}))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.3f195084.chunk.js.map